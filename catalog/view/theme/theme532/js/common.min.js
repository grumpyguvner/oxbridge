function getURLVar(b){var e=[];var d=String(document.location).split("?");if(d[1]){var a=d[1].split("&");for(i=0;i<a.length;i++){var c=a[i].split("=");if(c[0]&&c[1]){e[c[0]]=c[1]}}if(e[b]){return e[b]}else{return""}}}$(document).ready(function(){cols1=$("#column-right, #column-left").length;if(cols1==2){$("#content .product-layout:nth-child(2n+2)").after('<div class="clearfix visible-md visible-sm"></div>')}else{if(cols1==1){$("#content .product-layout:nth-child(3n+3)").after('<div class="clearfix hidden-xs"></div>')}else{$("#content .product-layout:nth-child(4n+5)").addClass("last")}}$(".text-danger").each(function(){var a=$(this).parent().parent();if(a.hasClass("form-group")){a.addClass("has-error")}});$("#currency .currency-select").on("click",function(a){a.preventDefault();$("#currency input[name='code']").attr("value",$(this).attr("name"));$("#currency").submit()});$("#language a").on("click",function(a){a.preventDefault();$("#language input[name='code']").attr("value",$(this).attr("href"));$("#language").submit()});$("#search input[name='search']").parent().find("button").on("click",function(){url=$("base").attr("href")+"index.php?route=product/search";var a=$("header input[name='search']").val();if(a){url+="&search="+encodeURIComponent(a)}location=url});$("#search input[name='search']").on("keydown",function(a){if(a.keyCode==13){$("header input[name='search']").parent().find("button").trigger("click")}});$("#menu .dropdown-menu").each(function(){var b=$("#menu").offset();var c=$(this).parent().offset();var a=(c.left+$(this).outerWidth())-(b.left+$("#menu").outerWidth());if(a>0){$(this).css("margin-left","-"+(a+5)+"px")}});$("#list-view").click(function(){$("#content .product-layout > .clearfix").remove();$(this).addClass("active");$("#grid-view").removeClass("active");$("#content .product-layout").attr("class","product-layout product-list col-xs-12");setTimeout(function(){$("#content .product-layout .product-thumb").css("height","auto")},200);localStorage.setItem("display","list")});$("#grid-view").click(function(){$(this).addClass("active");$("#list-view").removeClass("active");$("#content .product-layout > .clearfix").remove();cols=$("#column-right, #column-left").length;if(cols==2){$("#content .product-layout").attr("class","product-layout product-grid col-lg-6 col-md-6 col-sm-12 col-xs-12")}else{if(cols==1){$("#content .product-layout").attr("class","product-layout product-grid col-lg-4 col-md-4 col-sm-4 col-xs-12")}else{$("#content .product-layout").attr("class","product-layout product-grid col-lg-3 col-md-3 col-sm-6 col-xs-12")}}setTimeout(function(){$("#content .product-layout.product-grid .product-thumb").equalHeights()},200);localStorage.setItem("display","grid")});if(localStorage.getItem("display")=="list"){$("#list-view").trigger("click")}else{$("#grid-view").trigger("click")}$("[data-toggle='tooltip']").tooltip({container:"body"});$(document).ajaxStop(function(){$("[data-toggle='tooltip']").tooltip({container:"body"})})});var cart={add:function(a,b){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+a+"&quantity="+(typeof(b)!="undefined"?b:1),dataType:"json",beforeSend:function(){$("#cart > button").button("")},success:function(c){$(".alert, .text-danger").remove();$("#cart > button").button("reset");if(c.redirect){location=c.redirect}if(c.success){$("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+c.success+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');$("#cart-total").html(c.total);$("#cart").load("index.php?route=common/cart/info #cart");setTimeout(function(){$(".alert").fadeOut(1000)},3000)}}})},update:function(a,b){$.ajax({url:"index.php?route=checkout/cart/edit",type:"post",data:"key="+a+"&quantity="+(typeof(b)!="undefined"?b:1),dataType:"json",beforeSend:function(){$("#cart > button").button("")},success:function(c){$("#cart > button").button("reset");$("#cart-total").html(c.total);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart").load("index.php?route=common/cart/info #cart")}setTimeout(function(){$(".alert").fadeOut(1000)},3000)}})},remove:function(a){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+a,dataType:"json",beforeSend:function(){$("#cart > button").button("")},success:function(b){$("#cart > button").button("reset");$("#cart-total").html(b.total);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart").load("index.php?route=common/cart/info #cart")}setTimeout(function(){$(".alert").fadeOut(1000)},3000)}})}};var voucher={add:function(){},remove:function(a){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+a,dataType:"json",beforeSend:function(){$("#cart > button").button("loading")},complete:function(){$("#cart > button").button("reset")},success:function(b){$("#cart-total").html(b.total);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart").load("index.php?route=common/cart/info #cart")}setTimeout(function(){$(".alert").fadeOut(1000)},3000)}})}};var wishlist={add:function(a){$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+a,dataType:"json",success:function(b){$(".alert").remove();if(b.success){$("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+b.success+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>')}if(b.info){$("#content").parent().before('<div class="alert alert-info"><i class="fa fa-info-circle"></i> '+b.info+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>')}$("#wishlist-total").html(b.total);setTimeout(function(){$(".alert").fadeOut(1000)},3000)}})},remove:function(){}};var compare={add:function(a){$.ajax({url:"index.php?route=product/compare/add",type:"post",data:"product_id="+a,dataType:"json",success:function(b){$(".alert").remove();if(b.success){$("#content").parent().before('<div class="alert alert-success"><i class="fa fa-check-circle"></i> '+b.success+'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');$("#compare-total").html(b.total);setTimeout(function(){$(".alert").fadeOut(1000)},3000)}}})},remove:function(){}};$(document).delegate(".agree","click",function(b){b.preventDefault();$("#modal-agree").remove();var a=this;$.ajax({url:$(a).attr("href"),type:"get",dataType:"html",success:function(c){html='<div id="modal-agree" class="modal">';html+='  <div class="modal-dialog">';html+='    <div class="modal-content">';html+='      <div class="modal-header">';html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';html+='        <h4 class="modal-title">'+$(a).text()+"</h4>";html+="      </div>";html+='      <div class="modal-body">'+c+"</div>";html+="    </div";html+="  </div>";html+="</div>";$("body").append(html);$("#modal-agree").modal("show")}})});(function(b){function a(d,c){this.element=d;this.options=c;this.timer=null;this.items=new Array();b(d).attr("autocomplete","off");b(d).on("focus",b.proxy(this.focus,this));b(d).on("blur",b.proxy(this.blur,this));b(d).on("keydown",b.proxy(this.keydown,this));b(d).after('<ul class="dropdown-menu"></ul>');b(d).siblings("ul.dropdown-menu").delegate("a","click",b.proxy(this.click,this))}a.prototype={focus:function(){this.request()},blur:function(){setTimeout(function(c){c.hide()},200,this)},click:function(c){c.preventDefault();value=b(c.target).parent().attr("data-value");if(value&&this.items[value]){this.options.select(this.items[value])}},keydown:function(c){switch(c.keyCode){case 27:this.hide();break;default:this.request();break}},show:function(){var c=b(this.element).position();b(this.element).siblings("ul.dropdown-menu").css({top:c.top+b(this.element).outerHeight(),left:c.left});b(this.element).siblings("ul.dropdown-menu").show()},hide:function(){b(this.element).siblings("ul.dropdown-menu").hide()},request:function(){clearTimeout(this.timer);this.timer=setTimeout(function(c){c.options.source(b(c.element).val(),b.proxy(c.response,c))},200,this)},response:function(c){html="";if(c.length){for(i=0;i<c.length;i++){this.items[c[i]["value"]]=c[i]}for(i=0;i<c.length;i++){if(!c[i]["category"]){html+='<li data-value="'+c[i]["value"]+'"><a href="#">'+c[i]["label"]+"</a></li>"}}var d=new Array();for(i=0;i<c.length;i++){if(c[i]["category"]){if(!d[c[i]["category"]]){d[c[i]["category"]]=new Array();d[c[i]["category"]]["name"]=c[i]["category"];d[c[i]["category"]]["item"]=new Array()}d[c[i]["category"]]["item"].push(c[i])}}for(i in d){html+='<li class="dropdown-header">'+d[i]["name"]+"</li>";for(j=0;j<d[i]["item"].length;j++){html+='<li data-value="'+d[i]["item"][j]["value"]+'"><a href="#">&nbsp;&nbsp;&nbsp;'+d[i]["item"][j]["label"]+"</a></li>"}}}if(html){this.show()}else{this.hide()}b(this.element).siblings("ul.dropdown-menu").html(html)}};b.fn.autocomplete=function(c){return this.each(function(){var d=b(this).data("autocomplete");if(!d){d=new a(this,c);b(this).data("autocomplete",d)}})}})(window.jQuery);
